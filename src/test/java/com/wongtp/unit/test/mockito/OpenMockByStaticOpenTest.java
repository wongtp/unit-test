/*
 * Copyleft
 */
package com.wongtp.unit.test.mockito;

import com.wongtp.unit.test.app.entity.UserEntity;
import org.junit.Assert;
import org.junit.Test;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;

import static org.mockito.Mockito.when;

/**
 * 使用 MockitoAnnotations.openMocks(this) 来让当前的类支持 Mocktio
 * @author wongtp
 * @date 2024-06-21
 */
public class OpenMockByStaticOpenTest {

    @Mock
    public UserEntity userEntity;

    @Test
    public void openMockTest() throws Exception {
        // 使用方法调用的方式让当前这个类支持 @Mock, @Spy, @Captor, @InjectMocks 等 Mockito 的注解
        try (AutoCloseable autoCloseable = MockitoAnnotations.openMocks(this)) {
            when(userEntity.getId()).thenReturn(111);
            Assert.assertEquals(userEntity.getId(), Integer.valueOf(111));
        }
    }
}
